<head>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
</head>

<body>
    <div class="body-background">
    <%= render 'layouts/navbar' %>

    <!-- User_page -->
    <div class="User_Page">

        <div class="User_half">
            <!-- information about user -->
            <div class="Sezione_1">
                <!-- user bio -->
                <div class="user_info">

                    <!-- profile img -->
                    <div class="user_img">
                            <%= image_tag "Profile_page/default_avatar.svg", alt: "Immagine di default", width: 200, class: "rounded" %>
                    </div>
                    <div class="user_name">
                        <h2>Nome Utente</h2>
                    </div>
                    <button class="yellow-button button-1 edit-button"> Edit profile </button>
                </div>
                <!-- user stats -->
                <div class="user_stat">

                </div>
                <hr style="margin-right: 2%">
            </div>
            <!-- top 3 film  -->
            <div class="Sezione_2">

                <div class=Sezione_2-1>
                    <h2>TOP 3 FILM</h2>
                    <button class="yellow-button button-1 top3-button">Change Film</button>
                </div>

                <div>locandina 1</div>
                <div>locandina 2</div>
                <div>locandina 3</div>

            </div>
        </div>
        <div class="Sezione_3">
            <h1>sezione recensioni</h1>
        </div>

    </div>

    <!-- PopUp Edit -->
    <div id="edit-popup-overlay" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="auth-box">
                <div>
                    <span class="popup-txt" style="color: var(--color-2)">Modifica il tuo profilo</span>
                </div>
                <br>
                <div>
                    <%= form_with model: @user, url: profile_path, method: :patch, local: true, html: { multipart: true } do |f| %>
                        <div>
                        <%= f.label :first_name, "Nome", style:"color: var(--color-3)" %><br>
                        <%= f.text_field :first_name, required: true, class: "form-control mb-3", style:"color: var(--color-3)" %>
                        </div>
                        <div>
                        <%= f.label :last_name, "Cognome", style:"color: var(--color-3)" %><br>
                        <%= f.text_field :last_name, required: true, class: "form-control mb-3", style:"color: var(--color-3)"%>
                        </div>
                        <div>
                        <%= f.label :birth_date, "Data di nascita", style:"color: var(--color-3)" %><br>
                        <%= f.date_field :birth_date, required: true, class: "form-control mb-3", style:"color: var(--color-3)" %>
                        </div>
                        <div>
                        <%= f.label :username, "Username", style:"color: var(--color-3)" %><br>
                        <%= f.text_field :username, required: true, class: "form-control mb-3", style:"color: var(--color-3)" %>
                        </div>
                        <div>
                        <%= f.label :email, "Email", style:"color: var(--color-3)" %><br>
                        <%= f.email_field :email, required: true, class: "form-control mb-3", style:"color: var(--color-3)" %>
                        </div>

                        <!-- aggiungere controllo pw -->
                        <!-- Non modifica il database -->
                        <div>
                        <%= f.submit "Salva modifiche", class:"close-popup yellow-button button-1 sumbit-button" %>
                        </div>
                    <% end %>
                </div>
            </div>
        </div>
    </div>

    <!-- PopUp Top 3-->
    <div id="top3-popup-overlay" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="auth-box">
                <div>
                    <span class="popup-txt">Inserisci i tuoi 3 film preferiti</span>
                </div>

                <button class="close-popup mt-4 btn btn-link text-light w-100">Chiudi</button>
            </div>
        </div>
    </div>

    <!-- Script -->
    <script>
        document.querySelector(".edit-button").addEventListener("click", function() {
            document.getElementById("edit-popup-overlay").style.display = "flex";
        });

        document.getElementById("close-popup").addEventListener("click", function() {
            document.getElementById("edit-popup-overlay").style.display = "none";
        });
    </script>

    <script>
        document.querySelector(".top3-button").addEventListener("click", function() {
            document.getElementById("top3-popup-overlay").style.display = "flex";
        });

        document.getElementById("close-popup").addEventListener("click", function() {
            document.getElementById("top3-popup-overlay").style.display = "none";
        });
    </script>
  

</body>
